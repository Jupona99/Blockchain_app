<!-- <form>
            <h2>Add Certifications</h2>
            <label for="_companyID1">_companyID:</label>
            <input type="number" id="_companyID1" name="_companyID1" required>
            <br>
            <label for="_iso">_iso:</label>
            <input type="text" id="_iso" name="_iso" required>
            <br>
            <button type="button" onclick="AddCertifications()">Add Certifications</button>
        </form> -->

<!-- <form>
            <h2>Add Private Partner</h2>
            <label for="_myCompanyID1">_myCompanyID:</label>
            <input type="number" id="_myCompanyID1" name="_myCompanyID1" required>
            <br>
            <label for="_companyID2">_companyID:</label>
            <input type="number" id="_companyID2" name="_companyID2" required>
            <br>
            <button type="button" onclick="AddPrivatePartner()">Add Private Partner</button>
        </form> -->

<!-- <form>
            <h2>Add Public Partner</h2>
            <label for="_myCompanyID2">_myCompanyID:</label>
            <input type="number" id="_myCompanyID2" name="_myCompanyID2" required>
            <br>
            <label for="_companyID3">_companyID:</label>
            <input type="number" id="_companyID3" name="_companyID3" required>
            <br>
            <button type="button" onclick="AddPublicPartner()">Add Public Partner</button>
        </form> -->

<!-- <form>
            <h2>Add Statistics</h2>
            <label for="_companyID4">_companyID:</label>
            <input type="number" id="_companyID4" name="_companyID4" required>
            <br>
            <label for="_statistics">_statistics:</label>
            <input type="number" id="_statistics" name="_statistics" required>
            <br>
            <button type="button" onclick="AddStatistics()">Add Statistics</button>
        </form> -->

<!-- <form>
            <h2>Add Transparent Partner</h2>
            <label for="_myCompanyID3">_myCompanyID:</label>
            <input type="number" id="_myCompanyID3" name="_myCompanyID3" required />
            <br />
            <label for="_companyID5">_companyID:</label>
            <input type="number" id="_companyID5" name="_companyID5" required />
            <br />
            <button type="button" onclick="AddTransparentPartner()">Add Transparent Partner</button>
          </form> -->


<!-- <form>
            <h2>Get Certifications</h2>
            <label for="_companyID6">_companyID:</label>
            <input type="number" id="_companyID6" name="_companyID6" required />
            <br />
            <button type="button" onclick="GetCertifications()">Get Certifications</button>
          </form> -->

<!-- <form>
          
            <h2>Get Company</h2>
            <label for="_companyID7">_companyID:</label>
            <input type="number" id="_companyID7" name="_companyID7" required />
            <br />
            <button type="button" onclick="GetCompanyAndDisplayResult()">Get Company</button>
            
            <textarea id="companyResult" readonly></textarea>
          </form> -->

<!-- <form>
            <h2>Get Partner Info</h2>
            <label for="_companyID8">_companyID:</label>
            <input type="number" id="_companyID8" name="_companyID8" required />
            <br />
            <label for="_partnerIndex">_partnerIndex:</label>
            <input type="number" id="_partnerIndex" name="_partnerIndex" required />
            <br />
            <button type="button" onclick="GetPartnerInfo()">Get Partner Info</button>
          </form> -->

<!-- <form>
            <h2>Get Partners</h2>
            <label for="_companyID9">_companyID:</label>
            <input type="number" id="_companyID9" name="_companyID9" required />
            <br />
            <button type="button" onclick="GetPartners()">Get Partners</button>
          </form> -->

<!-- <form>
            <h2>Get Statistics</h2>
            <label for="_companyID10">_companyID:</label>
            <input type="number" id="_companyID10" name="_companyID10" required />
            <br />
            <button type="button" onclick="GetStatistics()">Get Statistics</button>
          </form> -->

<!-- <form>
            <h2>Get Visibility Level</h2>
            <label for="_companyID11">_companyID:</label>
            <input type="number" id="_companyID11" name="_companyID11" required />
            <br />
            <button type="button" onclick="GetVisibilityLevel()">Get Visibility Level</button>
          </form> -->

<!-- <form>
            <h2>See Requests</h2>
            <label for="_myCompanyID4">_myCompanyID:</label>
            <input type="number" id="_myCompanyID4" name="_myCompanyID4" required />
            <br />
            <button type="button" onclick="SeeRequests()">See Requests</button>
          </form> -->

<!-- <form>

  <div id="homePage" style="display: none;">
    <h2>Welcome to the Homepage!</h2>
    <div id="header">Transparensii - Sharing Platform</div>
    <div class="container">
      <div id="tabs">
        <button class="tab" onclick="displayCompanyTab()">Entreprise</button>
        <button class="tab" onclick="displaySearchTab()">Rechercher</button>
        <button class="tab" onclick="displayInfoTab()">Informations</button>
      </div>

      <div id="companyTab" class="tabContent">
        <h3>Votre entreprise</h3>
        <!-- Content specific to the company tab -->
<form>
  <!-- Add company information display elements here -->
</form>
</div>

<div id="searchTab" class="tabContent">
  <h3>Veuillez taper un nom</h3>
  <!-- Content specific to the search tab -->
  <form>
    <!-- Add search form elements here -->
  </form>
</div>

<div id="infoTab" class="tabContent">
  <h3>Voici les informations</h3>
  <!-- Content specific to the information tab -->
  <form>
    <!-- Add information display elements here -->
  </form>
</div>
</div>
</div>

<!DOCTYPE html>
<html>

<head>
  <title>Transparensii</title>
  <link rel="stylesheet" href="./styles.css">
</head>

<header>

  <h1 class="heading">Home</h1>

  <div id="menu" class="fas fa-bars"></div>

  <nav class="navbar">
    <ul>
      <li><a href="./HomePage.html?getCompany=true">Home</a></li>
      <li><a href="./Search.html?getAllCompanyNames=true">Search</a></li>
      <li><a href="MyPartners.html">My partners</a></li>
      <li><a href="Profile.html">Profile</a></li>
    </ul>
  </nav>

</header>

<body>

  <div id="InformationCompany">
    <h2>Informations de la compagnie</h2>
    <form>
      <label for="companyName">Nom :</label>
      <span id="companyName"></span>
      <br />
      <label for="companyLocation">Emplacement :</label>
      <span id="companyLocation"></span>
    </form>
    <h3>Certificates:</h3>
    <ul id="certificateList"></ul>
    <h3>Statistics:</h3>
    <ul id="statisticsList"></ul>
    <h3>Partners:</h3>
    <ul id="partnersList"></ul>
  </div>

  <select id="addPartnerDropdown" class="partner-dropdown">
    <option value="" selected disabled>Choose type of partner</option>
    <option value="public">Public Partner</option>
    <option value="transparent">Transparent Partner</option>
    <option value="private">Private Partner</option>
  </select>
  <button id="addPartnerButton">Ajouter un partenaire</button>
  <div id="loadingIndicator"></div> <!-- Loading indicator element -->


  <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js" type="application/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
  <script src="./Web_Partage.js"></script>
  <script>document.addEventListener("DOMContentLoaded", async () => {
      const params = new URLSearchParams(window.location.search);
      if (params.has("selectedCompanyName")) {
        const GetCompanyInfo = async () => {
          const selectedCompanyName = params.get("selectedCompanyName");
          const companyData = await myContract.getCompanyInfo(selectedCompanyName);
          console.log(companyData);

          const name = companyData[0];
          const location = companyData[1];
          const certificates = companyData[2];
          const statistics = companyData[3];
          const partners = companyData[4];

          document.getElementById("companyName").innerText = name;
          document.getElementById("companyLocation").innerText = location;

          const certificateList = document.getElementById("certificateList");
          certificateList.innerHTML = ''; // Clear the list before populating it
          if (certificates.length > 0) {
            for (let i = 0; i < certificates.length; i++) {
              const certificateItem = document.createElement("li");
              certificateItem.innerText = certificates[i];
              certificateList.appendChild(certificateItem);
            }
          } else {
            certificateList.style.display = "none"; // Hide the list if it's empty
          }

          const statisticsList = document.getElementById("statisticsList");
          statisticsList.innerHTML = ''; // Clear the list before populating it
          if (statistics.length > 0) {
            for (let i = 0; i < statistics.length; i++) {
              const statisticsItem = document.createElement("li");
              statisticsItem.innerText = statistics[i].toString();
              statisticsList.appendChild(statisticsItem);
            }
          } else {
            statisticsList.style.display = "none"; // Hide the list if it's empty
          }

          const partnersList = document.getElementById("partnersList");
          partnersList.innerHTML = ''; // Clear the list before populating it
          if (partners.length > 0) {
            for (let i = 0; i < partners.length; i++) {
              const partnerItem = document.createElement("li");
              partnerItem.innerText = `Company: ${partners[i].companyName}, Visibility: ${partners[i].visibility}`;
              partnersList.appendChild(partnerItem);
            }
          } else {
            partnersList.style.display = "none"; // Hide the list if it's empty
          }

          const addPartnerDropdown = document.getElementById("addPartnerDropdown");
          const addPartnerButton = document.getElementById("addPartnerButton");
          if (certificates.length === 0 && statistics.length === 0 && partners.length === 0) {
            addPartnerDropdown.style.display = "block"; // Show the dropdown list if all three lists are empty
            addPartnerButton.style.display = "block"; // Show the button if all three lists are empty
          } else {
            addPartnerDropdown.style.display = "none"; // Hide the dropdown list otherwise
            addPartnerButton.style.display = "none"; // Hide the button otherwise
          }
        };

        await GetCompanyInfo();
      }
    });
  </script>
</body>

</html>