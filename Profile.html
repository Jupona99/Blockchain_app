<!DOCTYPE html>
<html>

<head>
    <title>Transparensii</title>
    <link rel="stylesheet" href="./styles.css">
</head>

<header>

    <h1 class="heading">Profile</h1>

    <nav class="navbar">
        <ul>
            <li><a href="./HomePage.html?getCompany=true">Home</a></li>
            <li><a href="./Search.html?getAllCompanyNames=true">Search</a></li>
            <li><a href="./MyPartners.html?getPartners=true">My partners</a></li>
            <li><a href="./PartnersInfo.html?getPartners=true">Partners Info</a></li>
            <li><a href="./Profile.html?getMyCompany=true">Profile</a></li>
        </ul>
        <img src="Transparensii.png" alt="Transparensii Icon">
    </nav>

</header>

<body>

    <div id="InformationCompany">
        <h2>Company Informations</h2>
        <form>
            <label for="companyName">Name :</label>
            <span id="companyName"></span>
            <br />
            <label for="companyLocation">Location :</label>
            <span id="companyLocation"></span>
            <br />
            <label for="companyCertifactions">Certificates :</label>
            <span id="companyCertifactions"></span>
            <br />
            <label for="companyOwner">Owner :</label>
            <span id="companyOwner"></span>
            <br />
            <label for="companyURL">URL :</label>
            <span id="companyURL"></span>
        </form>
    </div>

    <div class="form-container">
        <form>
            <label for="_certificates">Certificates:</label>
            <input type="text" id="_certificates" name="_certificates" required />
        </form>
        <button id="addCertificates">Add</button>
    </div>

    <div class="form-container">
        <form>
            <label for="_statistics">Monthly turnover ($):</label>
            <input type="text" id="_statistics" name="_statistics" required />
        </form>
        <button id="addStatistics">Add</button>
    </div>


    <div id="loadingIndicator"></div> <!-- Loading indicator element -->

    <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js" type="application/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <script src="./Web_Partage.js"></script>
    <script>document.addEventListener("DOMContentLoaded", async () => {
            const params = new URLSearchParams(window.location.search);
            console.log(params);
            if (params.has("getMyCompany")) {
                const GetCompany = async () => {
                    const companyData = await myContract.getCompany();
                    console.log(companyData);

                    // Retrieve and display company information
                    // Modify the code as needed to update the relevant HTML elements
                    const name = companyData[0];
                    const location = companyData[1];
                    const certificates = companyData[2];
                    const owner = companyData[3];
                    const uRL = companyData[4];

                    document.getElementById("companyName").innerText = name;
                    document.getElementById("companyLocation").innerText = location;
                    document.getElementById("companyCertifactions").innerText = certificates;
                    document.getElementById("companyOwner").innerText = owner;
                    document.getElementById("companyURL").innerText = uRL;
                };

                await GetCompany();
            }
        });

    </script>
</body>

</html>